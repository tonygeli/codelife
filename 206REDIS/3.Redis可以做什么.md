# Redis可以做什么？

1. 记录帖子的点赞数、评论数和点击数 (hash)。 
2. 记录用户的帖子 ID 列表 (排序)，便于快速显示用户的帖子列表 (zset)。 
3. 记录帖子的标题、摘要、作者和封面信息，用于列表页展示 (hash)。 
4. 记录帖子的点赞用户 ID 列表，评论 ID 列表，用于显示和去重计数 (zset)。 
5. 缓存近期热帖内容 (帖子内容空间占用比较大)，减少数据库压力 (hash)。 
6. 记录帖子的相关文章 ID，根据内容推荐相关帖子 (list)。 
7. 如果帖子 ID 是整数自增的，可以使用 Redis 来分配帖子 ID(计数器)。 
8. 收藏集和帖子之间的关系 (zset)。 
9. 记录热榜帖子 ID 列表，总热榜和分类热榜 (zset)。 
10. 缓存用户行为历史，进行恶意行为过滤 (zset,hash)。

### Redis 有 5 种基础数据结构

1. `string` (字符串)： 当字符串长度小于 1M 时，扩容都是加倍现有的空间，如果超过 1M，扩容时一次只会多扩 1M 的空间。需要注意的是字符串最大长度为 512M。
2. `list` (列表)：
3. `set` (集合)
4. `hash` (哈 希)
5. `zset` (有序集合)。

```bash
# 过期和 set 命令扩展
> setex name 5 codename # 5s 后过期，等价于 set+expire
> get name 
"codename"
... # wait for 5s 
> get name 
(nil)

> setnx name codename # 如果 name 不存在就执行 set 创建
(integer) 1 
> get name 
"codename" 
> setnx name codename 
(integer) 0 # 因为 name 已经存在，所以 set 创建不成功

# 计数
# 如果 value 值是一个整数，还可以对它进行自增操作。自增是有范围的，它的范围是signed long 的最大最小值，超 过了这个值，Redis 会报错。

> set codename 9223372036854775807 
# Long.Max 
OK 
> incr codename
(error) ERR increment or decrement would overflow

```



