# 2.6.4消息的分发策略

## 消息的分发策略

MQ消息队列有以下几个角色

1.生产者
2.存储消息
3.消费者
那么生产者生成消息以后，MQ进行存储，消费者是2如何获取消息的呢？一般获取数据的方式无外乎推（push）或者拉（pull）两种方式，典型的git就有推拉机制，我们发送的http请求就是一种典型的拉取数据库数据返回的过程。而消息队列MQ是一种推送的过程，而这些推送机制会适用到很多的业务场景也有很多对应推机制策略。

## 消息的重试

在发送消息的过程中可能会出现异常，或网络的抖动，故障等等。因为造成消息的无法消费，比如用户在下订单，消费MQ接受，订单系统出现故障，导致用户支付失败。那么这个时候就需要消息中间件就必须支持消息重试机制策略。

## 消息的分发策略的机制和对比

|          | ActiveMQ | RabbtiMQ | Kafka | RocketMQ |
| -------- | -------- | -------- | ----- | -------- |
| 发布订阅 | 支持     | 支持     | 支持  | 支持     |
| 轮询分发 | 支持     | 支持     | 支持  | /        |
| 公平分发 | /        | 支持     | 支持  | /        |
| 重发     | 支持     | 支持     | /     | 支持     |
| 消息拉取 | /        | 支持     | 支持  | 支持     |

